<div class="auth-container">
  <!-- Coluna Esquerda - Formulário -->
  <div class="auth-form-section">
    <div class="auth-card">
      <!-- Logo -->
      <div class="logo">
        <div class="logo-icon">
          <i class="pi pi-chart-bar"></i>
        </div>
        <div class="logo-text">PlanWise</div>
      </div>

      <!-- Título -->
      <h1 class="auth-title">{{ isLoginMode ? 'Entrar na sua conta' : 'Criar sua conta' }}</h1>
      <p class="auth-subtitle">{{ isLoginMode ? 'Gerencie suas finanças de forma inteligente' : 'Comece a gerenciar suas finanças hoje mesmo' }}</p>

      <!-- Seletor de Modo -->
      <div class="mode-selector" [class.register-mode]="!isLoginMode">
        <button 
          type="button"
          class="mode-btn" 
          [class.active]="isLoginMode"
          (click)="setLoginMode()">
          <i class="pi pi-sign-in"></i>
          Entrar
        </button>
        <button 
          type="button"
          class="mode-btn" 
          [class.active]="!isLoginMode"
          (click)="setRegisterMode()">
          <i class="pi pi-user-plus"></i>
          Criar Conta
        </button>
      </div>

      <!-- Formulário -->
      <form [formGroup]="currentForm" (ngSubmit)="onSubmit()" class="auth-form">
        
        <!-- Nome (apenas no register) -->
        <div class="form-field" *ngIf="!isLoginMode">
          <label for="name" class="field-label">
            <i class="pi pi-user"></i>
            Nome completo
          </label>
          <input 
            pInputText 
            id="name"
            type="text" 
            formControlName="name" 
            placeholder="Digite seu nome completo"
            autocomplete="name"
            [class.p-invalid]="currentForm.get('name')?.invalid && currentForm.get('name')?.touched">
          <small 
            class="error-message" 
            *ngIf="currentForm.get('name')?.hasError('required') && currentForm.get('name')?.touched">
            Nome é obrigatório
          </small>
          <small 
            class="error-message" 
            *ngIf="currentForm.get('name')?.hasError('minlength') && currentForm.get('name')?.touched">
            Nome deve ter no mínimo 3 caracteres
          </small>
        </div>

        <!-- Email -->
        <div class="form-field">
          <label for="email" class="field-label">
            <i class="pi pi-envelope"></i>
            Email
          </label>
          <input 
            pInputText 
            id="email"
            type="email" 
            formControlName="email" 
            placeholder="Digite seu email"
            autocomplete="email"
            [class.p-invalid]="currentForm.get('email')?.invalid && currentForm.get('email')?.touched">
          <small 
            class="error-message" 
            *ngIf="currentForm.get('email')?.hasError('required') && currentForm.get('email')?.touched">
            Email é obrigatório
          </small>
          <small 
            class="error-message" 
            *ngIf="currentForm.get('email')?.hasError('email') && currentForm.get('email')?.touched">
            Email inválido
          </small>
        </div>

        <!-- Senha -->
        <div class="form-field">
          <label for="password" class="field-label">
            <i class="pi pi-lock"></i>
            {{ isLoginMode ? 'Senha' : 'Crie uma senha segura' }}
          </label>
          <p-password 
            id="password"
            formControlName="password"
            [placeholder]="isLoginMode ? 'Digite sua senha' : 'Crie uma senha segura'"
            [autocomplete]="isLoginMode ? 'current-password' : 'new-password'"
            [toggleMask]="true"
            [feedback]="!isLoginMode"
            [class.p-invalid]="currentForm.get('password')?.invalid && currentForm.get('password')?.touched"
            styleClass="w-full">
          </p-password>
          <small 
            class="error-message" 
            *ngIf="currentForm.get('password')?.hasError('required') && currentForm.get('password')?.touched">
            Senha é obrigatória
          </small>
          <small 
            class="error-message" 
            *ngIf="currentForm.get('password')?.hasError('minlength') && currentForm.get('password')?.touched">
            Senha deve ter no mínimo 6 caracteres
          </small>
        </div>

        <!-- Confirmar Senha (apenas no register) -->
        <div class="form-field" *ngIf="!isLoginMode">
          <label for="confirmPassword" class="field-label">
            <i class="pi pi-lock"></i>
            Confirmar senha
          </label>
          <p-password 
            id="confirmPassword"
            formControlName="confirmPassword"
            placeholder="Confirme sua senha"
            autocomplete="new-password"
            [toggleMask]="true"
            [feedback]="false"
            [class.p-invalid]="currentForm.get('confirmPassword')?.invalid && currentForm.get('confirmPassword')?.touched"
            styleClass="w-full">
          </p-password>
          <small 
            class="error-message" 
            *ngIf="currentForm.get('confirmPassword')?.hasError('required') && currentForm.get('confirmPassword')?.touched">
            Confirmação de senha é obrigatória
          </small>
          <small 
            class="error-message" 
            *ngIf="currentForm.hasError('passwordMismatch') && currentForm.get('confirmPassword')?.touched">
            As senhas não coincidem
          </small>
        </div>

        <!-- Botão Submit -->
        <p-button 
          type="submit" 
          [label]="isLoginMode ? 'Entrar' : 'Criar conta'"
          [icon]="isLoginMode ? 'pi pi-sign-in' : 'pi pi-user-plus'"
          [loading]="loadingService.isCurrentlyLoading"
          [disabled]="currentForm.invalid"
          styleClass="auth-button w-full">
        </p-button>
      </form>
    </div>
  </div>

  <!-- Coluna Direita - Visual -->
  <div class="auth-visual-section">
    <!-- Gráfico Abstrato -->
    <div class="abstract-graphic">
      <div class="graphic-ring ring-1"></div>
      <div class="graphic-ring ring-2"></div>
      <div class="graphic-ring ring-3"></div>
      
      <!-- Ícone central de dinheiro -->
      <div class="graphic-center-icon">
        <i class="pi pi-dollar"></i>
      </div>
      
      <div class="graphic-particles">
        <div class="particle" *ngFor="let particle of particles"></div>
      </div>
    </div>

    <!-- Card de Depoimento -->
    <div class="testimonial-card">
      <div class="testimonial-content">
        <p class="testimonial-text">
          "Graças ao PlanWise, consegui organizar minhas finanças de forma eficiente! 
          Interface intuitiva, recursos completos e resultados excelentes. 
          Altamente recomendado!"
        </p>
        <div class="testimonial-author">
          <strong>Maria Silva</strong>
          <span>Usuária Satisfeita</span>
        </div>
      </div>
    </div>
  </div>
</div>
